<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css">


  <meta name="keywords" content="Hexo, NexT">








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2">






<meta name="description" content="一些记录">
<meta property="og:type" content="website">
<meta property="og:title" content="pipasese的博客">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="pipasese的博客">
<meta property="og:description" content="一些记录">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="pipasese的博客">
<meta name="twitter:description" content="一些记录">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/">




<link rel="apple-touch-icon" href="/images/logo_icon.jpg">

  <title>pipasese的博客</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">pipasese的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">蜀道之难，难于上青天</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/23/what-is-utf8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="pipasese">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="pipasese的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/23/what-is-utf8/" itemprop="url">UTF-8 字符编码</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-12-23T21:16:59+08:00">
                2019-12-23
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>问题</p>
<blockquote>
<p><code>11100110 10110001 10011111</code>表示什么？</p>
</blockquote>
<h4 id="0x00-ASCII"><a href="#0x00-ASCII" class="headerlink" title="0x00 ASCII"></a><code>0x00</code> ASCII</h4><blockquote>
<p>American Standard Code for Information Interchange，美国信息交换标准代码 </p>
</blockquote>
<p><code>ASCII</code>最初由美国提出，解决了英语世界在计算机里的编码问题。<br><code>ASCII</code>从<code>00</code>开始，一直到<code>7f</code>，包含了<code>128</code>个字符，其中<code>33</code>个控制字符，<code>95</code>个可见字符。</p>
<ol>
<li>控制字符比较常见的如换行键、空字符、退出键等。</li>
<li>可见字符如空格、数字、大小写字母、符号等。</li>
</ol>
<p>可以通过<code>echo</code>配合<code>xxd</code>命令很简单的获取字符的ASCII值，如下我们就拿到了a的ascII值为0x61<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">echo</span> a | xxd</span></span><br><span class="line">00000000: 610a                          a.</span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">echo</span> a | xxd -b                     </span></span><br><span class="line">00000000: 01100001 00001010              a.</span><br></pre></td></tr></table></figure></p>
<p>随着互联网在全世界的普及，<code>ASCII</code>的局限性慢慢凸显，其无法表示其他语种如汉语、日语的字符。于是发展出了<code>Unicode</code>。</p>
<h4 id="0x01-Unicode"><a href="#0x01-Unicode" class="headerlink" title="0x01 Unicode"></a><code>0x01</code> Unicode</h4><blockquote>
<p>Unicode，又称为万国码、国际码、统一码、单一码</p>
</blockquote>
<p>Unicode是一项业界标准，为每一个字符都唯一了的编码，统一了各语种的编码。<br>比如<code>U+0061</code>表示<code>a</code>，<code>U+660e</code>代表汉字的<code>明</code>字，<code>U+1f600</code>表示<code>露齿而笑的脸😀</code>,<code>U+1F1F3</code>表示<code>中国国旗🇨🇳</code></p>
<p>Unicode里一个字型可以代表多种字符编码，甚至是某些编码的组合。<br>如<code>é</code>既可以用<code>U+00e9</code>表示，也可以用<code>U+0065U+0301</code>的组合表示。所以我们使用的时候，还是得根据实际使用的意义来输入，否则在计算长度以及字符串比较等方面就会不一致，造成不必要的麻烦，而且这些问题排查起来也很困难。</p>
<h4 id="0x02-UTF-8"><a href="#0x02-UTF-8" class="headerlink" title="0x02 UTF-8"></a><code>0x02</code> UTF-8</h4><blockquote>
<p>8-bit Unicode Transformation Format</p>
</blockquote>
<p><code>UTF-8</code>是一种针对Unicode的可变长度字符编码，也是一种前缀码。</p>
<ol>
<li><code>128</code>个<code>US-ASCII</code>字符只需一个字节编码（<code>Unicode</code>范围由<code>U+0000</code>至<code>U+007F</code>）</li>
<li>带有附加符号的拉丁文、希腊文、西里尔字母、亚美尼亚语、希伯来文、阿拉伯文、叙利亚文及它拿字母则需要两个字节编码（<code>Unicode</code>范围由<code>U+0080</code>至<code>U+07FF</code>）</li>
<li>其他基本多文种平面（<code>BMP</code>）中的字符（这包含了大部分常用字，如大部分的汉字）使用三个字节编码（<code>Unicode</code>范围由<code>U+0800</code>至<code>U+FFFF</code>）</li>
<li>其他极少使用的<code>Unicode</code>辅助平面的字符使用四至六字节编码（<code>Unicode</code>范围由<code>U+10000</code>至<code>U+1FFFFF</code>使用四字节，<code>Unicode</code>范围由<code>U+200000</code>至<code>U+3FFFFFF</code>使用五字节，<code>Unicode</code>范围由<code>U+4000000</code>至<code>U+7FFFFFFF</code>使用六字节）。</li>
</ol>
<table>
<thead>
<tr>
<th>代码范围</th>
<th>标量值</th>
<th>UTF-8</th>
<th>注释</th>
<th>个数</th>
</tr>
</thead>
<tbody>
<tr>
<td>000000 - 00007f</td>
<td>00000000 00000000 0zzzzzzz</td>
<td>00-f7</td>
<td>ASCII，字节由0开始</td>
<td>128</td>
</tr>
<tr>
<td>000080 - 0007ff</td>
<td>00000000 00000yyy yyzzzzzz</td>
<td>110yyyyy 10zzzzzz</td>
<td>第一个字节由110开始，接着的字节由10开始</td>
<td>1920</td>
</tr>
<tr>
<td>000800 - 00d7ff , 00e000 - 00ffff</td>
<td>00000000 xxxxyyyy yyzzzzzz</td>
<td>1110xxxx 10yyyyyy 10zzzzzz</td>
<td>第一个字节由1110开始，接着的字节由10开始</td>
<td>61440</td>
</tr>
<tr>
<td>010000 - 10ffff</td>
<td>000wwwxx xxxxyyyy yyzzzzzz</td>
<td>11110www 10xxxxxx 10yyyyyy 10zzzzzz</td>
<td>第一个字节由11110开始，接着的字节由10开始</td>
<td>1048576</td>
</tr>
</tbody>
</table>
<blockquote>
<p><code>Unicode</code>在范围<code>D800-DFFF</code>中不存在任何字符，基本多文种平面中约定了这个范围用于<code>UTF-16</code>扩展标识辅助平面（两个<code>UTF-16</code>表示一个辅助平面字符）。当然，任何编码都是可以被转换到这个范围，但在<code>Unicode</code>中他们并不代表任何合法的值。</p>
</blockquote>
<p>根据上面的表可见</p>
<ol>
<li><code>UTF-8</code>完美兼容<code>ASCII</code>编码</li>
<li>编码下可表示的<code>Unicode</code>字符数量很大，而且是可以继续扩展的</li>
</ol>
<p>同时我们可以根据<code>Unicode</code>值推导出<code>UTF-8</code>的编码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">A[Unicode:黄,U+9ec4] --&gt;|二进制| B(1001 1110 1100 0100)</span><br><span class="line">B --&gt; |UTF-8| C(11101001 10111011 10000100)</span><br><span class="line">C --&gt; |十六进制| D(UTF-8:e9bb84)</span><br></pre></td></tr></table></figure></p>
<p>也可以回到文章开头的问题，根据<code>UTF-8</code>的值，推导出<code>Unicode</code>字符<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">graph TD </span><br><span class="line">B(11100110  10110001 10011111) --&gt; |Unicode| C(0110 1100 0101 1111)</span><br><span class="line">C --&gt; |十六进制| D(Unicode:江,U+6c5f)</span><br></pre></td></tr></table></figure></p>
<h4 id="0x03-应用之阅读以及修改机器码"><a href="#0x03-应用之阅读以及修改机器码" class="headerlink" title="0x03 应用之阅读以及修改机器码"></a><code>0x03</code> 应用之阅读以及修改机器码</h4><p>学以致用，这样效果才会好<br>这是一段简单的输出字符串的程序<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdio.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> <span class="keyword">const</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"hello,world!黄"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>编译<br><code>$ gcc main.c | ./a.out</code><br>输出：<code>hello,world!黄</code></p>
<p>查看目标文件的段信息<br><code>$ objdump -s a.out</code><br>输出里的字符段如下：<br><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Contents of <span class="keyword">section</span> __cstring:</span><br><span class="line"> <span class="number">100000</span>fa<span class="number">2</span> <span class="number">68656</span><span class="keyword">c</span><span class="number">6</span><span class="keyword">c</span> <span class="number">6</span>f<span class="number">2</span><span class="keyword">c</span><span class="number">776</span>f <span class="number">726</span><span class="keyword">c</span><span class="number">6521</span> e<span class="number">9</span>bb<span class="number">8400</span>  hello,world<span class="title">!....</span></span><br></pre></td></tr></table></figure></p>
<p>我们可以很了然的知道，这一串十六进制编码代表了UTF-8编码的<code>hello,world!黄</code>。甚至可以直接通过<code>vim</code>的<code>xxd</code>格式进行修改<br><code>vim -b a.out</code><br>打开十六进制模式<br><code>%!xxd</code><br>查找到hello部分进行修改<br><code>/hello</code><br>恢复成二进制模式<br><code>%!xxd -r</code><br>保存退出<br><code>wq!</code></p>
<p>查看字符段<br><code>$ objdump -s a.out</code><br>输出：<br><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Contents of <span class="keyword">section</span> __cstring:</span><br><span class="line"> <span class="number">100000</span>fa<span class="number">2</span> <span class="number">68656</span><span class="keyword">c</span><span class="number">6</span><span class="keyword">c</span> <span class="number">6</span>f<span class="number">2</span><span class="keyword">c</span><span class="number">776</span>f <span class="number">726</span><span class="keyword">c</span><span class="number">6521</span> e<span class="number">9</span>bb<span class="number">8400</span>  hello,world<span class="title">!....</span></span><br></pre></td></tr></table></figure></p>
<p><code>$ ./a.out</code><br>输出：<code>hello,world!江</code><br>这样，我们就修改了机器码。</p>
<p>同时，笔者也想通了一些问题，比如<code>hardCode</code>进代码里的密钥肯定是不安全的，<code>iOS</code>的代码签名也是为了保证程序不被篡改。</p>
<h6 id="参考链接："><a href="#参考链接：" class="headerlink" title="参考链接："></a>参考链接：</h6><ul>
<li>ascii：<a href="https://zh.wikipedia.org/wiki/ASCII" target="_blank" rel="noopener">https://zh.wikipedia.org/wiki/ASCII</a></li>
<li>unicode：<a href="https://home.unicode.org/" target="_blank" rel="noopener">https://home.unicode.org/</a></li>
<li>emoji：<a href="http://unicode.org/emoji/charts/full-emoji-list.html" target="_blank" rel="noopener">http://unicode.org/emoji/charts/full-emoji-list.html</a></li>
<li>汉字对应的unicode：<a href="http://www.chi2ko.com/tool/CJK.htm" target="_blank" rel="noopener">http://www.chi2ko.com/tool/CJK.htm</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/13/rxSwift-learn-one/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="pipasese">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="pipasese的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/13/rxSwift-learn-one/" itemprop="url">响应式编程 与 RXSwift（一）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-05-13T20:55:22+08:00">
                2019-05-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>我想从 <strong>what</strong>、<strong>how</strong>、<strong>why</strong> 几个方面，简单的写一下如何用 <strong>RXSwift</strong> 写响应式代码。</p>
<h1 id="what-is-RxSwift"><a href="#what-is-RxSwift" class="headerlink" title="what is RxSwift?"></a>what is RxSwift?</h1><p>在计算机中，<strong>响应式编程</strong>是一种面向<strong>数据流</strong>和<strong>变化传播</strong>的<strong>异步编程范式</strong>。<br>举个例子：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let <span class="selector-tag">a</span> = <span class="selector-tag">b</span> + c</span><br></pre></td></tr></table></figure>
<p>在<strong>命令式编程</strong>中，这个表达式是计算 b 和 c 的和 a。假如之后 b 和 c 变化了，a 也不会变化。<br>而在<strong>响应式编程</strong>里，a 会随着 b 和 c 的变化而变化，不用再次执行这块代码求出一个值，再赋值给 a。<br>响应式编程可以简化交互式用户界面的开发，比如将视图与数据流绑定，数据流有新的值的时候，视图则会自动响应变化。<br><strong>ReactiveX</strong> 是一组提供异步的数据流的 api，在 <strong>ReactiveX</strong> 的眼中，一切都可以当作数据流，我们可以用它来轻松的开始响应式编程。<br>而 <strong>RxSwift</strong> 就是 <strong>ReactiveX</strong> 的 Swift 实现。</p>
<h1 id="how-to-use-RxSwift？"><a href="#how-to-use-RxSwift？" class="headerlink" title="how to use RxSwift？"></a>how to use RxSwift？</h1><p>怎么用好 <strong>RxSwift</strong> 呢？使用 <strong>RxSwift</strong> 的关键，是如何转变思维，写出响应式代码。<br>举个例子，在登录页面，会对账号和密码的输入框做校验，账号限制为 11 位字符，密码限制为 6 到 20 个字符，只有在账号和密码都有效的情况下，登录按钮才可点击。</p>
<h2 id="命令式编程"><a href="#命令式编程" class="headerlink" title="命令式编程"></a>命令式编程</h2><p><strong>在命令式编程下的典型思路是这样的 </strong><br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1. </span>实现账号 TextField 以及密码 TextField 的 delegate 的字符串变化的方法，获取到他们的字符串</span><br><span class="line"><span class="bullet">2. </span>根据字符串的变化，设置登录按钮的enable状态</span><br></pre></td></tr></table></figure></p>
<p>具体实现我就不写了，相信大家已经写了很多遍了</p>
<h2 id="响应式编程"><a href="#响应式编程" class="headerlink" title="响应式编程"></a>响应式编程</h2><p><strong>在响应式编程下的典型思路是这样</strong><br><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>. 获取账号和密码的字符流 <span class="keyword">user</span>NameInputStream、<span class="built_in">pass</span>WordInputStream</span><br><span class="line"><span class="number">2</span>. 将账号流转换为账号是否有效的流 <span class="keyword">user</span>NameValidStream、<span class="built_in">pass</span>WordValidStream</span><br><span class="line"><span class="number">3</span>. 将 <span class="keyword">user</span>NameValidStream、<span class="built_in">pass</span>WordValidStream 两个流合并为判断账号和密码是否有效的流 loginValidStream</span><br><span class="line"><span class="number">4</span>. 将 loginValidStream 与登录按钮绑定</span><br></pre></td></tr></table></figure></p>
<p><strong>流程如图</strong><br><img src="http://ww1.sinaimg.cn/large/81d9def4ly1g2u7lmbk4lj21fy09cdhm.jpg" alt="登录按钮流"></p>
<p><strong>show you the code</strong><br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> passWordField: <span class="type">UITextField</span>! </span><br><span class="line"><span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> userNameField: <span class="type">UITextField</span>! </span><br><span class="line"><span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> loginButton: <span class="type">UIButton</span>! </span><br><span class="line"><span class="keyword">let</span> bag = <span class="type">DisposeBag</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">bindView</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">//生成流</span></span><br><span class="line">    <span class="keyword">let</span> passWordInput = <span class="keyword">self</span>.passWordField.rx.text</span><br><span class="line">    <span class="keyword">let</span> userNameInput = <span class="keyword">self</span>.userNameField.rx.text</span><br><span class="line">    <span class="comment">//转换流</span></span><br><span class="line">    <span class="keyword">let</span> passWordValid = passWordInput.<span class="built_in">map</span> &#123; (passWord) -&gt; <span class="type">Bool</span> <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> passWord = passWord&#123;</span><br><span class="line">            <span class="keyword">return</span> passWord.<span class="built_in">count</span> &gt; <span class="number">6</span> &amp;&amp; passWord.<span class="built_in">count</span> &lt; <span class="number">20</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> userNameValid = userNameInput.<span class="built_in">map</span> &#123; (userName) -&gt; <span class="type">Bool</span> <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> userName = userName &#123;</span><br><span class="line">            <span class="keyword">return</span> userName.<span class="built_in">count</span> == <span class="number">11</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//合并流</span></span><br><span class="line">    <span class="keyword">let</span> loginValid = <span class="type">Observable</span>&lt;<span class="type">Bool</span>&gt;.combineLatest(userNameValid, passWordValid) &#123; (userName, passWord) -&gt; <span class="type">Bool</span> <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">return</span> userName &amp;&amp; passWord</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//绑定</span></span><br><span class="line">    loginValid.bind(to: <span class="keyword">self</span>.loginButton.rx.isEnabled).disposed(by: bag)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>可以看出这些代码主要在做的事情，就是流的生成、转换、合并，以及最后与 UI 的绑定。代码看起来也很直观，业务逻辑一目了然，减少了潜在性的错误。</p>
<h1 id="why-RxSwift？"><a href="#why-RxSwift？" class="headerlink" title="why RxSwift？"></a>why RxSwift？</h1><p>RxSwift 是一个利器，而且它的扩展库 RxCocoa 将 UIKit 里的大部分 UI 控件做了 Reactive 化，可以很方便的对控件进行数据绑定，以及监控控件的变化。使用 RxSwift 我们可以省去命令式编程下的很多胶水代码，通过流的转换合并，轻易的写出复杂的逻辑。<br>响应式编程的难点一个是学习曲线比较陡峭，一个是思维转换比较困难，踏过这两个坎之后，就会发现一个新世界了。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/22/nginx-user-403/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="pipasese">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="pipasese的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/22/nginx-user-403/" itemprop="url">NGINX 用户权限引起的 403 问题</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-04-22T20:23:20+08:00">
                2019-04-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h1><p>在 CentOS 上安装完 NGINX 之后，尝试修改 NGINX 的 root 地址</p>
<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">...</span></span><br><span class="line">http&#123;</span><br><span class="line">    server&#123;</span><br><span class="line">        root <span class="string">/root/blog</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">...</span></span><br></pre></td></tr></table></figure>
<p>在 root 用户下，新建文件夹 blog 如下</p>
<figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-<span class="ruby">-root</span></span><br><span class="line"><span class="ruby">    --blog</span></span><br><span class="line"><span class="ruby">        index.html</span></span><br></pre></td></tr></table></figure>
<p>重启 NGINX 服务</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">service nginx reload</span></span><br></pre></td></tr></table></figure>
<p>访问 HTTP 80 端口</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ curl 0.0.0.0:80</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span><span class="tag">&lt;<span class="name">title</span>&gt;</span>403 Forbidden<span class="tag">&lt;/<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">bgcolor</span>=<span class="string">"white"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">center</span>&gt;</span><span class="tag">&lt;<span class="name">h1</span>&gt;</span>403 Forbidden<span class="tag">&lt;/<span class="name">h1</span>&gt;</span><span class="tag">&lt;/<span class="name">center</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span><span class="tag">&lt;<span class="name">center</span>&gt;</span>nginx/1.12.2<span class="tag">&lt;/<span class="name">center</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="排查"><a href="#排查" class="headerlink" title="排查"></a>排查</h1><p>排查错误日志，发现为<code>Permission denied</code>权限错误</p>
<figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ tail /var/log/nginx/error.log</span><br><span class="line"></span><br><span class="line"><span class="number">2019</span>/<span class="number">04</span>/<span class="number">22</span> <span class="number">20</span>:<span class="number">36</span>:<span class="number">47</span> <span class="string">[error]</span> <span class="number">26764</span>#<span class="number">0</span>: *<span class="number">68</span> <span class="string">"/root/blog/index.html"</span> is forbidden (<span class="number">13</span>: Permission denied), client: <span class="number">127.0.0.1</span>, server: _, request: <span class="string">"<span class="keyword">GET</span> / HTTP/1.1"</span>, host: <span class="string">"0.0.0.0"</span></span><br></pre></td></tr></table></figure>
<p>查看 NGINX 的进程用户，发现 NGINX 的 worker 进程为 NGINX 用户启动的</p>
<figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ ps -aux | grep nginx</span><br><span class="line">root    <span class="number"> 26085 </span> 0.0  0.0<span class="number"> 125720 </span><span class="number"> 5268 </span>?        Ss   17:05   0:00 nginx: master process /usr/sbin/nginx</span><br><span class="line">nginx   <span class="number"> 26764 </span> 0.0  0.0<span class="number"> 126140 </span><span class="number"> 4224 </span>?        S    19:34   0:00 nginx: worker process</span><br><span class="line">nginx   <span class="number"> 26765 </span> 0.0  0.0<span class="number"> 126140 </span><span class="number"> 4224 </span>?        S    19:34   0:00 nginx: worker process</span><br><span class="line">root    <span class="number"> 26955 </span> 0.0  0.0<span class="number"> 112660 </span> <span class="number"> 976 </span>pts/5    S+   20:41   0:00 grep --color=auto nginx</span><br></pre></td></tr></table></figure>
<p>查看 root 文件夹的用户权限，发现 root 文件夹的其他用户只有读权限，这样 NGINX 用户是无法访问的，于是可以理解为何报错 403 了。</p>
<figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ ls -l</span><br><span class="line"></span><br><span class="line">dr-xr-xr--.<span class="number"> 10 </span>root root <span class="number"> 4096 </span>Apr<span class="number"> 22 </span>20:35 root</span><br></pre></td></tr></table></figure>
<h1 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h1><h4 id="简单粗暴法"><a href="#简单粗暴法" class="headerlink" title="简单粗暴法"></a>简单粗暴法</h4><p>将 nginx.conf 的 user 修改为 root，这样 worker 进程是在 root 用户下启动的，可以顺利访问 /root/blog 文件夹。</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">user</span> <span class="title">root</span>;</span><br></pre></td></tr></table></figure>
<h4 id="更安全的方法"><a href="#更安全的方法" class="headerlink" title="更安全的方法"></a>更安全的方法</h4><p>上述方法让 root 用户跑 worker 进程，太危险了。其实可以新建一个账号，在该账号下放置静态文件，然后将其权限暴露，这种做法更加安全。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> adduser www</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> passwd  www</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> cp -R /root/blog /home/www/</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> chmod 755 /home/www</span></span><br></pre></td></tr></table></figure>
<p>再将 nginx.conf 的 root 地址修改为<code>/home/www/blog</code></p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">http&#123;</span><br><span class="line">    server&#123;</span><br><span class="line"><span class="symbol">        root:</span><span class="meta-keyword">/home/</span>www/blog;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样，就能正常访问 root 主页了</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/09/2018summary/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="pipasese">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="pipasese的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/09/2018summary/" itemprop="url">2018流水账</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-01-09T19:01:44+08:00">
                2019-01-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>思来想去，还是要对 2018 年做个记录。</p>
<h1 id="生活"><a href="#生活" class="headerlink" title="生活"></a>生活</h1><p>在今年的十月六号，在老家举办了婚礼，跟对象走进了婚姻的殿堂。<br>感谢我的妻子的理解，以及对我的包容。<br>从此以后，我的人生之路，有了贤妻陪伴，特别好。<br>还有一件事情就是开始还房贷了，每个月五千的房贷，三千的装修贷，两千的房租。<br>人的一生呐还是要靠自己的奋斗，要是在 2017 年，我是不敢想象我能扛起来的。<br>2019 年 9 月交房。</p>
<h1 id="旅游"><a href="#旅游" class="headerlink" title="旅游"></a>旅游</h1><p>跟老婆一起去了趟美丽的开远参加昂然兄的婚礼，多年未见的大学同学聚了聚。<br>吃了米线、卷粉、烧烤、烧豆腐、竹荪山药鸡，非常感谢昂然兄的款待，云南的吃，特别好。<br>顺道去了普者黑，普者黑的水，特别好。<br>倒是没有去云大看看，有点遗憾。</p>
<h1 id="游戏"><a href="#游戏" class="headerlink" title="游戏"></a>游戏</h1><p>血源很合我的胃口，玩通了一周目，虽然虐的我不要不要的，但是那种痛快的杀戮感，特别好。<br>入了怪物猎人，玩不下去，还是喜欢魂系列。<br>还有 Diablo3，玩了下 NEC，最近开始玩 DH，真香。<br>下载了很多其他游戏，都没时间或者精力去玩了。</p>
<h1 id="工作"><a href="#工作" class="headerlink" title="工作"></a>工作</h1><p>一直以来，生活一直向工作倾斜。<br>工作中，说的最多的一个字就是<b>苦</b>。<br>家和公司两点一线。<br>晚上十一二点回家，也是家常便饭，某些地方肯定是出了问题。<br>这样难免少了对妻子的陪伴，所以我特别感谢我的妻子的理解。<br>为了补偿，在我妻子生日那天，我特地请假，陪她去中山公园、万松园路转悠了下。吃了美味的公安石锅鱼杂，特别美好的一天。</p>
<h1 id="蜀道难"><a href="#蜀道难" class="headerlink" title="蜀道难"></a>蜀道难</h1><p>技术上，今年只是在搞工程了，没有深入。<br>接触了 Golang，不过都没有坚持下去，运用起来。可以说看完就忘，一方面自己没有去找应用场景，一方面也是往工作太倾斜，导致自己的时间比较少。<br>书籍买了不少，真看了的不多。<br>看过的有《程序员的自我修养》《高效能人士的7个习惯》《白鹿原》，一直在看《重构》、《HTTP权威指南》。<br>粗浅看了《海子的诗》，记住了如下两段：</p>
<blockquote>
<p>山后面是山，<br>天空上面是天空，<br>道路前面，还是道路。</p>
</blockquote>
<blockquote>
<p>走在路上，<br>放声歌唱，<br>大风吹过山岗，<br>上面是无边的天空。</p>
</blockquote>
<p>我很敬佩能坚持的人，粗浅看了《胡适留学日记》，胡适大佬每天记录一篇日记，记录了很多年。</p>
<h1 id="Flag"><a href="#Flag" class="headerlink" title="Flag"></a>Flag</h1><p>根据以往的经验，flag 仅仅是 flag，但是我觉得还是要说一下，立足长远来看。<br>三年的 flag 是不上班。<br>一年的 flag 是开一家淘宝店并且运营起来。<br>这个一年的 flag 是三年 flag 的一个具体实现途径。</p>
<p><em>以上，2018年大年三十晚。</em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/23/learningrxswift/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="pipasese">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="pipasese的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/23/learningrxswift/" itemprop="url">学习 RxSwift</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-01-23T19:58:38+08:00">
                2018-01-23
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="rule-1"><a href="#rule-1" class="headerlink" title="rule 1"></a>rule 1</h1><ul>
<li>Sequences can have 0 or more elements.</li>
<li>Once an error or completed event is received, the sequence cannot produce any other element.</li>
<li>When a sequence sends the completed or error event all internal resources that compute sequence elements will be freed.</li>
<li>To cancel production of sequence elements and free resources immediately, call dispose on the returned subscription.</li>
</ul>
<h1 id="rule-2"><a href="#rule-2" class="headerlink" title="rule 2"></a>rule 2</h1><ul>
<li>onNext 没结束之前，onComplete、onError、onNext都不会开始执行</li>
<li>dispose被释放之后，其相关的订阅都会执行dispose</li>
<li>Observerable，subscribe是同步的</li>
<li>可被订阅者，被订阅者，可被订阅，之后发布消息</li>
<li>订阅者，订阅者发布消息</li>
</ul>
<h1 id="other"><a href="#other" class="headerlink" title="other"></a>other</h1><p>现在只是用熟练了绑定，监听。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/15/2017summary/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="pipasese">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="pipasese的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/15/2017summary/" itemprop="url">一个总结</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-01-15T22:34:39+08:00">
                2018-01-15
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>一八年已经过去了百分之四，之前没有做过什么总结，不过去年确实值得说道说道。</p>
<p>我本打算年初的时候回武汉，但二月份的时候恋爱了，就是这么猝不及防。由于对象在无锡，我选择暂时不回武汉，继续在上海待着。</p>
<p>期间就是恋爱工作看书了。一直到下半年，跟女朋友达成回乡的共识，于是着手实施回武汉。由于工作原因，需要帮公司招个人，以及做一下工作交接，从原定的九月份，一直到十月份才终于算是完成任务。招人挺难的，主要是看缘分。最后招了一位当时从武汉来上海找工作的小伙子，虽然期间发生了一些意外，所幸最后还是顺利入职了。写到这里不禁要感慨下几年前自己背着个包来到上海，脑袋里空空如也，能走到现在这般，真是幸运。</p>
<p>十月国庆假期过后，武汉出台了<a href="http://www.wuhan.gov.cn/whszfwz/xwxx/whyw/201710/t20171016_139167.html" target="_blank" rel="noopener">大学生落户政策</a>，大学生可以无门槛购房了。</p>
<p>回武汉的第一时间，我就把户口落了。然后紧锣密鼓的开始看房，一开始在江夏那边看，定了个楼盘，然后就等着开盘。</p>
<p>在等待的过程中，我开始泡图书馆，每天从庙山坐城铁到武昌，然后乘公交到省图书馆。省图挺好的，有暖气、开水、Wi-Fi、插座，自习区里基本都是满的，氛围非常好，十分适合看书学习。过了几天寻思投投简历，招聘信息里看到了现在的公司，想起之前招的那位小伙子有跟我推荐这家公司，于是毫不犹豫的投了，顺利入职。</p>
<p>后来，江夏的那个楼盘通知我说不开盘了，得，继续看房吧。在同事的介绍下，去看了个光谷南的楼盘，捡了个漏，还剩几套没有卖出去。跟家里商量了下，决定买。但当时的钱离首付还差点，记得那天晚上，列了个名单，挨个打电话借钱，于是房子就这么地了，感谢借给我钱的亲朋好友。剩下的就是好好工作，好好睡觉，好好还债了。</p>
<p>其实回武汉的时候我是怀着一种苦大仇深的情绪的，因为印象中武汉的互联网环境真的不乐观，算是跟外面漂泊的自己和解了，有一种妥协的成分在里面。回来之后，很幸运的加入了现在非常棒的团队。武汉这几年招商引资，很多一线公司都来投资建厂，不得不说环境确实是变好了。个人的发展真的是跟历史的大进程息息相关呐，感谢武汉，感谢互联网时代。</p>
<p>好像没有说以后的事。最近写一些基础设施项目，有一些感悟。我觉得把大的方向定下来了，局部模块都是一个渐渐优化、渐渐积累的过程。比如这篇总结，我也是先搭个架子，优化了好多个版本，算是写出来了。生活也是一样，我也是满怀希望，相信未来的。扛着这么大的担子，真的只有继续努力了。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/02/20/multithreading/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="pipasese">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="pipasese的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/02/20/multithreading/" itemprop="url">闲话iOS多线程</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-02-20T22:10:57+08:00">
                2017-02-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>随着硬件的发展和多核 CPU 的普及，CPU 的性能越来越强了。为了让 CPU 充分运转，聪明的计算机科学家设计出了多线程模式，一个线程也就是相应的一条代码路径，多线程就是多条代码路径。</p>
<h1 id="线程队列"><a href="#线程队列" class="headerlink" title="线程队列"></a>线程队列</h1><p>那么怎么控制这些代码路径呢，于是就应运而生了一些代码路径的组合，叫做线程队列。这些队列有不同的执行代码路径的方式，比如窜行执行、并行执行等。</p>
<p>##窜行队列<br>可以把窜行队列当作并行队列的特殊情况，也就是最大并发数量为1。执行完了一个代码路径之后，根据优先级等因素，接着执行下一个，并不保证严格按照先进先出的顺序执行。那么问题来了，假如要控制窜行队列的执行顺序该怎么办呢，于是有了依赖这个概念，也就是一个代码路径依赖于另外一些代码路径，等到它依赖的路径都执行完了，这一个代码路径才能上路，那么这样就能严格控制执行顺序了。</p>
<h2 id="并行队列"><a href="#并行队列" class="headerlink" title="并行队列"></a>并行队列</h2><p>并行队列呢，也能通过依赖控制好某些路径的先后顺序，但是这个并行出现的问题就是要知道并发出去的代码路径都已经执行完毕，要做下一步工作了，于是并行队列就提供了这个功能。并行队列的应用场景可以是一些相互之间没有影响的工作。</p>
<h2 id="取消队列执行"><a href="#取消队列执行" class="headerlink" title="取消队列执行"></a>取消队列执行</h2><p>怎么让一个正在执行的代码路径停止呢，建议的做法是，要经常性的在关键性的点检查当前的状态，假如当前处于canceled状态，则停止执行下去，而且这个代码路径也没有机会再次执行了。让一个队列停止，这个队列也只是将当前的代码路径的状态置为canceled，也不发配新的代码路径执行了，恢复之后会继续分配。</p>
<h1 id="锁"><a href="#锁" class="headerlink" title="锁"></a>锁</h1><p>既然是多线程，那么不可避免的会出现资源抢夺，于是锁出现了。有资源竞争的互斥锁，有适用于生产者消费者的条件锁，有适用于递归的递归锁。使用锁的过程中要时刻注意防止死锁的发生。把用于访问共享事物的代码块称为临界区。不能让一个临界区始终处于等待状态，也不能让一个临界区始终占有共享区间。</p>
<h2 id="互斥锁"><a href="#互斥锁" class="headerlink" title="互斥锁"></a>互斥锁</h2><p>互斥锁，只能对临界区加锁一次，不能对同一个线程加多次锁，这样会造成死锁。对临界区加锁的时候，如果临界区被使用了，则当前线程被阻塞，直到临界区被释放，轮到当前线程进入临界区。假如有多个线程处于等待状态，则根据优先级进行队列处理。</p>
<h2 id="条件锁"><a href="#条件锁" class="headerlink" title="条件锁"></a>条件锁</h2><p>比互斥锁多的一个是只有锁在特定条件下才能加锁，释放锁的时候可以指定锁的当前条件。适用于生产者消费者模式，一个线程负责生产，其他线程负责消费。负责生产的轮询进入临界区，条件则是一个判定是否要生产的条件，比如货物数量为10则开始生产，生产完毕后将条件设置为shouldProduct = false，消费线程可以进入临界区消费。负责消费的线程出临界区的时候，根据剩余数量判断是否需要生产，如需生产，则将条件shouldProduct = true，则生产线程进入临界区生产。</p>
<h2 id="递归锁"><a href="#递归锁" class="headerlink" title="递归锁"></a>递归锁</h2><p>当在递归情况下，使用互斥锁的时候，会造成死锁。这种情况下适用递归锁，允许在一个线程里多次加锁和解锁，当解锁次数跟加锁次数相等时，出临界区，由于要做额外的加锁次数判断，开销会比互斥锁大。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/09/04/React-Native-environment-setup/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="pipasese">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="pipasese的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/09/04/React-Native-environment-setup/" itemprop="url">React Native 初探一：Mac + iOS 开发环境搭建</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-09-04T18:50:01+08:00">
                2016-09-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="基础环境"><a href="#基础环境" class="headerlink" title="基础环境"></a>基础环境</h2><p>1 . 安装 node 和 watchman。</p>
<pre><code>brew install node
brew install watchman
</code></pre><p>2 . 安装 React Native。</p>
<pre><code>npm install -g react-native-cli
</code></pre><p>如遇到权限问题，请用</p>
<pre><code>sudo npm install -g react-native-cli
</code></pre><p>3 . 安装 Xcode，<a href="https://itunes.apple.com/us/app/xcode/id497799835?mt=12" target="_blank" rel="noopener">Mac App Store</a> 安装既可。<br>4 . 验证是否安装成功，可通过如下命令新建和启动项目试试。</p>
<pre><code>react-native init demoProject
cd demoProject
react-native run-ios
</code></pre><p>启动过程中如果遇到问题，可能是初始化中漏装了一个包，解决途径执行。</p>
<pre><code>npm install
</code></pre><p>再启动，网上下载的项目出现启动问题也可尝试执行此命令。</p>
<h2 id="开发工具"><a href="#开发工具" class="headerlink" title="开发工具"></a>开发工具</h2><p>1 . 接下来选择趁手的 IDE，尝试过 Sublime 和 atom 之后，目前我使用的 WebStorm + <a href="https://github.com/virtoolswebplayer/ReactNative-LiveTemplate" target="_blank" rel="noopener">ReactNative-LiveTemplate插件</a>。<br>2 . 日志可以在项目路径下执行以下命令查看。</p>
<pre><code>react-native log-ios
</code></pre><p>3 . Debug 起来也很方便，请先安装好 Chrome，在 iOS 模拟器中 <em>Command⌘ + D</em>，选择 <em>Debug JS Remotely</em>，就可以在 Chrome 愉快的 Debug 了，其它的选项也可以尝试一下。感慨 ReactNative 真是一个伟大的项目，前端真是神奇，FaceBook 真是一个伟大的公司。<br><strong>以上信息全部来自<a href="https://facebook.github.io/react-native/" target="_blank" rel="noopener">React Native官网</a>。</strong></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/07/24/prototype-pratice/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="pipasese">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="pipasese的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/07/24/prototype-pratice/" itemprop="url">原型理解碎碎念</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-07-24T21:38:57+08:00">
                2016-07-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>   假如把最终的原型定位为100。我们来模拟一个典型的有问题的开发过程：</p>
<p>   产品讨论出一个原型，可以定位为80［<em>为什么是80，差异的20算是产品忽略掉的一些情况，会在开发、测试、验收过程中暴露出来</em>］，输出在prd上，这一环节会丢失掉一些信息，prd姑且算有60的原型值吧。</p>
<p>   接着通过prd输出给开发，这一环节就看开发的阅读理解水平以及认真程度了，忽视了一行字可能就漏了一个功能。好吧，到了开发这里，姑且算为50吧。然后开发结束。</p>
<p>   接下来给测试，那得看测试吸收了多少prd，算是60吧。OK，测试完毕，接下来到验收环节了。</p>
<p>   产品发现跟自己想要的完全两码事，然后告诉开发“你们做的是特么的什么玩意儿”，此时应该会伴随着激烈的争吵，最后开发妥协。然后经过一些痛苦的过程之后做到了符合发版的程度，达到的原型值可能只有80+，这个过程处于项目尾期，代码质量无法保证，而且不出意外会加班熬夜。总之，这个开发过程前期会很轻松，因为少做了很多事情，但是到验收阶段会非常痛苦，而且可能还会影响发版。</p>
<p>   怎么避免这种情况呢，一句话：<strong>尽早把问题暴露出来，然后解决掉</strong>。开发在阅读理解完prd之后，通过与产品经理确认原型信息，让自己与产品经理的理解同步，可能交谈过程中还会发现一些没有考虑到的情况。接下来的开发以及测试环节发现疑问及时找产品经理确认。这样最后在验收环节，也不会出现大的差异。整个项目过程和谐稳定的进行。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/10/18/Interface-Builder/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="pipasese">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="pipasese的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/10/18/Interface-Builder/" itemprop="url">Interface Builder</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-10-18T21:32:49+08:00">
                2015-10-18
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>这个周末接触了下interface builder，主要涉及到size class 和nib，从最初的抓耳挠腮到初窥门径，还是蛮有成就感的，<br>准备在项目里尝试用一下nib这一块。</p>
<hr>
<h1 id="size-class"><a href="#size-class" class="headerlink" title="size class"></a>size class</h1><ul>
<li>分为C（紧凑） A（任意） R（正常） 三种，<br>假如要在C和R之间做区分，那千万别设置A相关的属性，这样会乱的很，就将C和R分开做</li>
<li>一般情况下都是 wA+hA 情况</li>
<li>iphone：正面向上的情况是 wC＋hR，其他面向情况都是 wC＋hC</li>
<li>ipad：长和宽都是regular</li>
</ul>
<hr>
<h1 id="interface-builder"><a href="#interface-builder" class="headerlink" title="interface builder"></a>interface builder</h1><h2 id="1-customview-nib"><a href="#1-customview-nib" class="headerlink" title="1. customview+nib"></a>1. customview+nib</h2><ul>
<li>自定义view的话，file owner 设置为self的类</li>
<li>一般大家都只生成一个 view，然后将view添加到self，当作subview</li>
<li>view只是self的一个属性</li>
<li>view的类型不能设置为self，这样会导致循环引用，会崩溃</li>
</ul>
<h2 id="2-drawrect-nib"><a href="#2-drawrect-nib" class="headerlink" title="2. drawrect+nib"></a>2. drawrect+nib</h2><ul>
<li>这个到要把view的类型设置成self的类型</li>
<li>有两个关键词：IB_DESIGNABLE（表示这个要实时在interface builder展示啦）和IBInspectable（动态属性），可以在interface builder上设置，确实很惊艳</li>
<li>不过这种目前只能在<strong>- (void)drawRect:(CGRect)rect</strong>方法里有效，不过这已经很不错了，不过还没想好在哪用。。</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image" src="/images/avatar.gif" alt="pipasese">
          <p class="site-author-name" itemprop="name">pipasese</p>
           
              <p class="site-description motion-element" itemprop="description">一些记录</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">12</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">categories</span>
              
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">11</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">pipasese</span>
</div>


<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  

  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  






  





  

  

  

  

  

  

</body>
</html>
